<Window x:Class="Cooney.AI.WindowsDesktop.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:Cooney.AI.WindowsDesktop.Views"
        xmlns:vm="clr-namespace:Cooney.AI.WindowsDesktop.ViewModels"
        xmlns:local="clr-namespace:Cooney.AI.WindowsDesktop.Converters"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=vm:MainWindowViewModel, IsDesignTimeCreatable=False}"
        Background="{DynamicResource BackgroundPrimaryBrush}"
        Title="Desktop App" Height="450" Width="800">
<Window.Resources>
        <DataTemplate DataType="{x:Type vm:ChatViewModel}">
            <views:ChatView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:SettingsViewModel}">
            <views:SettingsView/>
        </DataTemplate>
        <!-- Converters -->
        <local:BoolToGridLengthConverter x:Key="BoolToGridLengthConverter" />
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Window.Resources>
    <Grid>
<Grid.ColumnDefinitions>
            <ColumnDefinition Width="{Binding DataContext.IsNavCollapsed, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BoolToGridLengthConverter}}"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Navigation Menu -->
        <Border Grid.Column="0"
                Background="{DynamicResource BackgroundSecondaryBrush}"
                BorderBrush="{DynamicResource BorderPrimaryBrush}"
                BorderThickness="0,0,1,0">
			<Grid Width="200">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <!-- Toggle button -->
				<Button Grid.Row="0"
						Style="{StaticResource NavToggleButtonStyle}"
						Command="{Binding ToggleNavCommand}"
                        FontFamily="Segoe MDL2 Assets" FontSize="16" Content="&#xE700;" />

                <!-- Navigation Items -->
                <ListBox Grid.Row="1"
                         BorderThickness="0"
                         Background="Transparent"
                         ItemsSource="{Binding NavigationItems}"
                         SelectedItem="{Binding SelectedNavigationItem}"
                         ItemContainerStyle="{StaticResource NavMenuItemStyle}">
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:NavigationItemViewModel}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontFamily="Segoe MDL2 Assets"
                                           Text="{Binding Icon}"
                                           Foreground="{DynamicResource TextPrimaryBrush}"
                                           VerticalAlignment="Center"
                                           FontSize="16"/>
								<TextBlock Text="{Binding Label}"
                                            Foreground="{DynamicResource TextPrimaryBrush}"
                                            Margin="12,0,0,0"
                                            VerticalAlignment="Center"
                                            Visibility="{Binding DataContext.IsNavCollapsed, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <!-- Footer Navigation Items -->
				<ListBox Grid.Row="2"
                         BorderThickness="0"
                         Background="Transparent"
                         ItemsSource="{Binding FooterNavigationItems}"
                         SelectedItem="{Binding SelectedFooterNavigationItem}"
                         ItemContainerStyle="{StaticResource NavMenuItemStyle}">
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:NavigationItemViewModel}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontFamily="Segoe MDL2 Assets"
                                           Text="{Binding Icon}"
                                           Foreground="{DynamicResource TextPrimaryBrush}"
                                           VerticalAlignment="Center"
                                           FontSize="16"/>
								<TextBlock Text="{Binding Label}"
                                            Foreground="{DynamicResource TextPrimaryBrush}"
                                            Margin="12,0,0,0"
                                            VerticalAlignment="Center"
                                            Visibility="{Binding DataContext.IsNavCollapsed, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Border>

        <!-- Content Area -->
        <ContentControl Grid.Column="1" Content="{Binding CurrentContent}"/>
    </Grid>
</Window>
